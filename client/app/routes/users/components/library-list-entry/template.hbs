<div class="library-entry" data-test-selector="library-list-entry">
  <div class="entry-wrapper" {{action 'toggleDisplay'}}>
    <div class="entry-left medium-7 columns">
      <div class="entry-title">
        <span>
          {{media.canonicalTitle}}
        </span>
      </div>
    </div>
    <div class="entry-right medium-5 columns">
      <div class="entry-progress">
        {{#if isViewingSelf}}
          {{one-way-input
            placeholder="0"
            value=entry.episodesWatched
            update=(action 'update' 'episodesWatched')}}
        {{else}}
          <span>{{entry.episodesWatched}}</span>
        {{/if}}

        <span><span class="sep">/</span> {{episodeCountDisplay}}</span>
      </div>
      <div class="entry-rating">
        <span>{{ratingDisplay}}</span>
      </div>
      <div class="entry-type">
        <span>{{typeDisplay}}</span>
      </div>
    </div>
  </div>

  {{#if isOpened}}
    <div class="library-dropdown">
      <div class="drop-arrow"></div>
      {{#if isViewingSelf}}
        <div class="small-12 columns">
          {{! TODO: Switch to textarea? If so, one-way it. }}
          {{one-way-input
            value=entry.notes
            update=(action 'update' 'notes')
            placeholder=(concat 'Personal notes about ' media.canonicalTitle)
            class="personal-notes"}}
        </div>
      {{else}}
        {{#if entry.notes}}
          <div class="small-12 columns">
            {{one-way-input
              class="personal-notes"
              value=entry.notes
              readonly=true}}
          </div>
        {{/if}}
      {{/if}}

      <div class="medium-2 columns">
        <img class="drop-thumb" src={{media.posterImage}}>
      </div>
      <div class="medium-6 columns">
        <h4 class="drop-title">
          {{link-to media.canonicalTitle 'anime.show' media}}
        </h4>
        <ul class="genres">
          {{#each media.genres as |genre|}}
            <li>{{genre.name}}</li>
          {{/each}}
        </ul>
        <p class="drop-description">
          {{media.synopsis}}
        </p>
      </div>
      <div class="medium-4 columns">
        <div class="drop-options">
          {{#if isViewingSelf}}
            <div class="status-select">
              {{library-status-button entry=entry}}
            </div>
            <div class="dropdown-rating">
              {{! TODO: Implement dropdown }}
              {{#foundation-button data-toggle="privacy-dropdown"}}
                {{if entry.private 'Private' 'Public'}}
                {{fa-icon "caret-down" fixedWidth=true}}
              {{/foundation-button}}

              {{#foundation-dropdown dropdownId="privacy-dropdown" closeOnClick=true}}
                <ul class="no-bullet">
                  <li>
                    <a {{action 'updateState'}}>
                      {{if entry.private 'Public' 'Private'}}
                    </a>
                  </li>
                </ul>
              {{/foundation-dropdown}}

              {{! TODO: Implement rating component }}
              <div class="rating-options">
                <span class="icon-container" data-rating="1">
                  <i class="fa fa-star-o"></i>
                </span>
                <span class="icon-container" data-rating="2">
                  <i class="fa fa-star-o"></i>
                </span>
                <span class="icon-container" data-rating="3">
                  <i class="fa fa-star-o"></i>
                </span>
                <span class="icon-container" data-rating="4">
                  <i class="fa fa-star-o"></i>
                </span>
                <span class="icon-container" data-rating="5">
                  <i class="fa fa-star-o"></i>
                </span>
              </div>
            </div>
          {{/if}}

          <div class="rewatch">
            {{#if isViewingSelf}}
              <button class="button" type="button" {{action 'rewatch'}}>Rewatch</button>
            {{/if}}

            <label>
              <span>Rewatched</span>
              {{#if isViewingSelf}}
                {{one-way-input
                  placeholder="0"
                  value=entry.rewatchCount
                  update=(action 'update' 'rewatchCount')}}
              {{else}}
                <span>{{entry.rewatchCount}}</span>
              {{/if}}
              <span>times</span>
            </label>
          </div>
        </div>
      </div>
    </div>
  {{/if}}
</div>
