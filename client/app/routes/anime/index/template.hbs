{{! TODO: Remove/Replace with CSS }}
<style>.global-footer {display: none;}</style>

<div class="media-browse">
  <div class="media-grid columns">
    <div class="filter-options">
      <div class="filter-wrapper">
        <!-- Date Range Filter -->
        <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Year</label>
            <span class="filter-values">{{year.[0]}} - {{year.[1]}}</span>
          </div>
          {{foundation-slider start=1914 end=2016
                              initialStart=year.[0] initialEnd=year.[1]
                              doubleSided=true decimal=0
                              onUpdate=(action (mut year))
                              onRelease=(action 'reload')}}
          <div class="filter-legend">
            <div class="low-value">
              1914
            </div>
            <div class="high-value">
              2016
            </div>
          </div>
          {{! TODO: }}
          <button class="expanded dropdown button" data-toggle="timeframe-dropdown">Using slider</button>
          <div class="dropdown-pane" id="timeframe-dropdown" data-dropdown data-auto-focus="true">
            <ul>
              <li><a href="#">Test</a></li>
            </ul>
          </div>
        </div>

        <!-- Rating Filter -->
         <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Avg. Score</label>
            <span class="filter-values">{{averageRating.[0]}} - {{averageRating.[1]}}</span>
          </div>
          {{foundation-slider start=0.5 end=5.0 step=0.5
                              initialStart=averageRating.[0] initialEnd=averageRating.[1]
                              doubleSided=true decimal=1
                              onUpdate=(action (mut averageRating))
                              onRelease=(action 'reload')}}
          <div class="filter-legend">
            <div class="low-value">
              <i class="fa fa-star-half-o"></i>
            </div>
            <div class="high-value">
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
              <i class="fa fa-star"></i>
            </div>
          </div>
        </div>

        <!-- Where to Watch Filter -->
         <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Streaming (U.S.)</label>
            <span class="filter-values">{{streamers.length}}</span>
          </div>
          {{box-select class="box-select"
                       selection=availableStreamers
                       selected=streamers
                       onSelect=(action (mut streamers))}}
          {{! TODO: Implement }}
          <div class="language-select">
            <input id="subbed" type="checkbox" checked="checked"><label for="subbed">Subbed</label>
            <input id="dubbed" type="checkbox" checked="checked"><label for="dubbed">Dubbed</label>
          </div>
        </div>


        <!-- Episode Filter -->
         <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Episodes</label>
            <span class="filter-values">{{episodeCount.[0]}} - {{episodeCount.[1]}}</span>
          </div>
          {{! TODO: 1000 is too high? }}
          {{foundation-slider start=1 end=1000 step=1
                              initialStart=episodeCount.[0]
                              initialEnd=episodeCount.[1]
                              doubleSided=true decimal=0
                              onUpdate=(action (mut episodeCount))
                              onRelease=(action 'reload')}}
          <div class="filter-legend">
            <div class="low-value">
              1
            </div>
            <div class="high-value">
              âˆž
            </div>
          </div>
        </div>


        <!-- Rating Filter -->
         <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Rating</label>
            <span class="filter-values">{{ageRating.length}}</span>
          </div>
          {{box-select class="rating-select"
                       selection=availableAgeRatings
                       selected=ageRating
                       onSelect=(action (mut ageRating))}}
        </div>



        <!-- Categories Filter -->
         <div class="filter-widget">
          <div class="filter-header">
            <label class="filter-title">Categories</label>
            <span class="filter-values">{{genres.length}}</span>
          </div>
          {{box-select class="category-select"
                       selection=availableGenres
                       selected=genres
                       onSelect=(action (mut genres))}}
        </div>
      </div>
    </div>


    <div class="search-media">
      <i class="fa fa-search"></i>
      {{one-way-input
        type=search
        update=(action 'filterText')
        placeholder="Search by title, director, studio or voice actor"}}
    </div>
    <div class="media-posters">
      <div class="row">
        {{#each media as |anime|}}
          {{! TODO: Componentize }}
          <div class="poster-wrapper">
            <div class="grid-poster">
              <img src="http://localhost:3000{{anime.posterImage}}">
              <div class="poster-overlay">
                <div class="shared-friends">
                  <a href="#" class="friend-avatar"><img src="https://static.hummingbird.me/users/avatars/000/044/425/thumb_small/tumblr_mjf1jtHNm61s7110mo1_250.jpg?1440141803"></a>
                  <a href="#" class="friend-count">03</a>
                </div>
                <div class="trailer">
                  <a data-open="media-trailer"><i class="fa fa-play"></i></a>
                </div>
              </div>
            </div>
            <div class="ellipsis">
              <a href="#" class="media-title">{{anime.canonicalTitle}}</a>
            </div>
          </div>
        {{/each}}
      </div>

      {{scrolling-paginator model=media}}
    </div>
  </div>
</div>


<!-- Trailer modal -->
<div class="reveal media-trailer" id="media-trailer" data-reveal>
  <button class="close-button" data-close aria-label="Close reveal" type="button">
    <span aria-hidden="true">&times;</span>
  </button>
  <iframe width="100%" height="520" src="https://www.youtube.com/embed/K2Qs-S2huTo?rel=0&amp;controls=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
  <div class="trailer-info">
    <div class="info-header">
      <h4>Fullmetal Alchemist: Brotherhood</h4>
      <ul class="type-tags">
        <li>TV</li>
        <li>PG-13</li>
        <li class="average-rating">
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star"></i>
          <i class="fa fa-star-half-o"></i>
          <i class="fa fa-star-o"></i>
        </li>
      </ul>
    </div>

  </div>
</div>
